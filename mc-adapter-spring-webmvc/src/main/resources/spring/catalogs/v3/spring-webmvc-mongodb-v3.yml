catalogName: "spring-webmvc"
entries:
  - scope: "project"
    prototype: "Application"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/Application.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/Application.java"
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/MongoApplicationIT.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/ApplicationTests.java"

  - scope: "project"
    prototype: "Text"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/resources/MongoDbApplicationDotProperties.ftl"
        destination: "{{appModule}}/src/main/resources/application.properties"

  - scope: "project"
    prototype: "Text"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/resources/ValidationMessages.ftl"
        destination: "{{appModule}}/src/main/resources/ValidationMessages.properties"

  - scope: "project"
    prototype: "ExceptionHandler"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/advice/GlobalExceptionHandler.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/advice/GlobalExceptionHandler.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/advice/GlobalExceptionHandlerTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/advice/GlobalExceptionHandlerTests.java"

  - scope: "project"
    prototype: "Exception"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/exception/UnprocessableEntityException.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/exception/UnprocessableEntityException.java"
      - facet: "main"
        sourceTemplate: "/spring/common/main/exception/ResourceNotFoundException.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/exception/ResourceNotFoundException.java"
      - facet: "main"
        sourceTemplate: "/spring/common/main/exception/BadRequestException.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/exception/BadRequestException.java"

  - scope: "project"
    prototype: "SpringProfiles"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/common/SpringProfiles.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/common/SpringProfiles.java"

  - scope: "project"
    prototype: "ApplicationConfiguration"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/config/ApplicationConfiguration.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/config/ApplicationConfiguration.java"

  - scope: "project"
    prototype: "DateTimeFormatConfiguration"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/config/DateTimeFormatConfiguration.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/config/DateTimeFormatConfiguration.java"

  - scope: "project"
    prototype: "ProblemConfiguration"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/config/ProblemConfiguration.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/config/ProblemConfiguration.java"

  - scope: "project"
    prototype: "WebMvcConfiguration"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/config/WebMvcConfiguration.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/config/WebMvcConfiguration.java"

  - scope: "project"
    prototype: "LocalDateConverter"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/config/LocalDateConverter.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/config/LocalDateConverter.java"
      - facet: "test"
        sourceTemplate: "/spring/common/test/config/LocalDateConverterTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/config/LocalDateConverterTests.java"

  - scope: "project"
    prototype: "CustomSQLRepository"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/CustomSQLRepository.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/CustomRepository.java"

  - scope: "project"
    prototype: "MongoDataStore"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/spi/MongoDataStore.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/spi/DataStore.java"

  - scope: "project"
    prototype: "Controller"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/endpoint-root/RootController.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/endpoint/root/RootController.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/endpoint-root/RootControllerTest.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/endpoint/root/RootControllerTest.java"
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/endpoint-root/MongoRootControllerIT.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/endpoint/root/RootControllerIT.java"
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/endpoint-root/MongoRootExceptionHandlingIT.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/endpoint/root/RootExceptionHandlingIT.java"

  - scope: "project"
    prototype: "SecurityResponseHeadersFilter"
    tags: "security:headers"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/filter/SecurityResponseHeadersFilter.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/filter/SecurityResponseHeadersFilter.java"

  - scope: "project"
    prototype: "SecureRandomSeries"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/math/SecureRandomSeries.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/math/SecureRandomSeries.java"
      - facet: "test"
        sourceTemplate: "/spring/common/test/math/SecureRandomSeriesTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/math/SecureRandomSeriesTests.java"

  - scope: "project"
    prototype: "ResourceIdSupplier"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/spi/ResourceIdSupplier.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/spi/ResourceIdSupplier.java"

  - scope: "project"
    prototype: "ResourceIdTrait"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/trait/ResourceIdTrait.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/trait/ResourceIdTrait.java"

  - scope: "project"
    prototype: "AlphabeticAnnotation"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/validation/Alphabetic.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/Alphabetic.java"

  - scope: "project"
    prototype: "AlphabeticValidator"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/validation/AlphabeticValidator.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/AlphabeticValidator.java"
      - facet: "test"
        sourceTemplate: "/spring/common/test/validation/AlphabeticValidatorTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/validation/AlphabeticValidatorTests.java"

  - scope: "project"
    prototype: "OnCreate"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/validation/OnCreate.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/OnCreate.java"

  - scope: "project"
    prototype: "OnUpdate"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/validation/OnUpdate.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/OnUpdate.java"

  - scope: "project"
    prototype: "ResourceIdAnnotation"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/validation/ResourceId.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/ResourceId.java"

  - scope: "project"
    prototype: "ResourceIdValidator"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/validation/ResourceIdValidator.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/ResourceIdValidator.java"
      - facet: "test"
        sourceTemplate: "/spring/common/test/validation/ResourceIdValidatorTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/validation/ResourceIdValidatorTests.java"

  - scope: "project"
    prototype: "SearchTextAnnotation"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/validation/SearchText.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/SearchText.java"

  - scope: "project"
    prototype: "SearchTextValidator"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/common/main/validation/SearchTextValidator.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/validation/SearchTextValidator.java"
      - facet: "test"
        sourceTemplate: "/spring/common/test/validation/SearchTextValidatorTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/validation/SearchTextValidatorTests.java"

  - scope: "project"
    prototype: "ContainerConfiguration"
    facets:
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/config/MongoContainerConfiguration.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/config/ContainerConfiguration.java"

  - scope: "project"
    prototype: "RegisterDatabaseProperties"
    facets:
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/database/MongoRegisterDatabaseProperties.ftl"
        destination:  "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/database/RegisterDatabaseProperties.java"

  - scope: "project"
    prototype: "Text"
    facets:
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/resources/CreateSchemaDotSql.ftl"
        destination: "{{appModule}}/src/integrationTest/resources/create-schema.sql"

  # ---------------------------------------------------------------------------------------------------
  # Endpoint artifacts
  # ---------------------------------------------------------------------------------------------------

# The restful Resource, as a POJO
  - scope: "endpoint"
    prototype: "Entity"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/entity/Entity.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{ejbName}}.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/database/EntityTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{entityName}}EntityTests.java"
      - facet: "testFixtures"
        sourceTemplate: "/spring/webmvc/testFixtures/database/WebMvcEjbTestFixtures.ftl"
        destination: "{{appModule}}/src/testFixtures/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{entityName}}EntityTestFixtures.java"

# The database representation of the POJO
  - scope: "endpoint"
    prototype: "Document"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/entity/Document.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{entityName}}Document.java"

# the API for the persistence layer. A better name for this class might be, for example, PetPersistenceAdapter.
  - scope: "endpoint"
    prototype: "DocumentStoreApi"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/entity/MongoDocumentDataStoreIFace.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{entityName}}DataStore.java"

# The implementation of the DataStore Api
  - scope: "endpoint"
    prototype: "DocumentStoreImpl"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/entity/MongoDataStoreProvider.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{entityName}}DataStoreProvider.java"

# A random class to illustrate using predicates for database searches
  - scope: "endpoint"
    prototype: "EntityWithText"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/predicate/EntityWithText.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/predicate/{{entityName}}WithText.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/database/predicate/EntityWithTextTest.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/predicate/{{entityName}}WithTextTest.java"

#
# The POJO representing the restful resource
#
  - scope: "endpoint"
    prototype: "EntityResource"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/domain/EntityResource.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/domain/{{pojoName}}.java"
      - facet: "textFixtures"
        sourceTemplate: "/spring/webmvc/testFixtures/domain/WebMvcModelTestFixtures.ftl"
        destination: "{{appModule}}/src/testFixtures/java/{{basePackagePath}}/domain/{{entityName}}TestFixtures.java"

#
# The document repository class
#
  - scope: "endpoint"
    prototype: "Repository"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/entity/MongoDbRepository.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{entityName}}Repository.java"
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/database/endpoint/MongoRepositoryIT.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/{{entityName}}RepositoryIT.java"

#
# the pojo-to-document and document-to-pojo converters
#
  - scope: "endpoint"
    prototype: "PojoToDocumentConverter"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/converter/PojoToDocumentConverter.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/converter/{{entityName}}PojoToDocumentConverter.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/database/converter/PojoToDocumentConverterTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/converter/{{entityName}}PojoToDocumentConverterTests.java"

  - scope: "endpoint"
    prototype: "DocumentToPojoConverter"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/converter/DocumentToPojoConverter.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/converter/{{entityName}}DocumentToPojoConverter.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/database/converter/DocumentToPojoConverterTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/database/{{lowerCaseEntityName}}/converter/{{entityName}}DocumentToPojoConverterTests.java"

#
# The controller
#
  - scope: "endpoint"
    prototype: "Controller"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/endpoint/MongoRestController.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}Controller.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/endpoint/MongoControllerTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}ControllerTests.java"
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/endpoint/MongoControllerIT.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}ControllerIT.java"

#
# The interface (api) of the Service
#
  - scope: "endpoint"
    prototype: "RestServiceApi"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/endpoint/MongoRestService.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}Service.java"

# The concrete impl of the Service

  - scope: "endpoint"
    prototype: "RestServiceImpl"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/endpoint/MongoRestServiceProvider.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}ServiceProvider.java"
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/endpoint/MongoServiceTests.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}ServiceTests.java"
      - facet: "integrationTest"
        sourceTemplate: "/spring/webmvc/integrationTest/endpoint/MongoServiceIT.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}ServiceIT.java"

#
# A constants class enumerating the REST urls of a given restful resource
#
  - scope: "endpoint"
    prototype: "EntityRoutes"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/endpoint/EntityRoutes.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}Routes.java"

# A helper class that loads example data into the DB. This is suitable for demo/dev work but probably not for production
  - scope: "endpoint"
    prototype: "DatabaseTablePopulator"
    facets:
      - facet: "main"
        sourceTemplate: "/spring/webmvc/main/database/entity/MongoDatabaseTablePopulator.ftl"
        destination: "{{appModule}}/src/main/java/{{basePackagePath}}/database/{{entityName}}/{{entityName}}TablePopulator.java"

# Hmmm. This may be dead code now.
  - scope: "endpoint"
    prototype: "ConversionService"
    facets:
      - facet: "test"
        sourceTemplate: "/spring/webmvc/test/FakeConversionService.ftl"
        destination: "{{appModule}}/src/test/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/FakeConversionService.java"

# Integration tests of a given Controller and its exception handling. Controller's decide _when_ a BadResourceException
# or ResourceNotFoundException or UnprocessableEntityException is thrown. This test verifies that behavior.
#
  - scope: "endpoint"
    prototype: "EndpointExceptionHandler"
    facets:
      - facet: "integrationTest"
        sourceTemplate:  "/spring/webmvc/integrationTest/endpoint/MongoExceptionHandlerIT.ftl"
        destination: "{{appModule}}/src/integrationTest/java/{{basePackagePath}}/endpoint/{{lowerCaseEntityName}}/{{entityName}}ExceptionHandlingIT.java"